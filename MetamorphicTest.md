# 🧬 메타모픽 테스트(Metamorphic Test) 가이드

메타모픽 테스트는 “정답을 정확히 모르더라도” 입력을 변형했을 때 **반드시 성립해야 하는 성질(불변식)** 을 이용해 풀이를 검증하는 기법입니다.

이 프레임워크에서는 메타모픽 테스트를 보통 **별도 Module**로 분리해서 실행하는 것을 권장합니다.

---

## 1) 메타모픽 테스트가 유용한 상황

- Reference(정답 구현)를 만들기 어렵다
- 출력이 너무 크거나 복잡해서 expected를 손으로 작성하기 어렵다
- 랜덤 테스트를 많이 돌리고 싶은데 expected를 만들기 어렵다
- 풀이가 “성질”을 만족하는지(불변식)로 검증하고 싶다

---

## 2) 기본 개념

메타모픽 테스트는 다음 형태의 검증을 합니다.

- 원본 입력: `x`
- 변형 입력: `x' = mutate(x)`
- 풀이 결과: `f(x)`, `f(x')`
- 검증: `property(x, x', f(x), f(x')) == PASS`

예시:
- 애너그램 문제: `shuffle(s)`를 해도 결과는 동일해야 함
- 합 문제: 입력 배열에 `+0`을 추가해도 결과는 동일해야 함
- 주사위 회전: 동일한 주사위를 회전시키면 “일치 여부”는 변하지 않아야 함

---

## 3) 권장 구조(운영 방식)

### ✅ 운영 원칙
- “정상 예제/랜덤 테스트” 모듈과
- “메타모픽 테스트” 모듈은 분리

예:
- `AnagramModule` : expected 기반 + examples
- `AnagramMetamorphicModule` : metamorphic property 기반 검증만

이렇게 하면:
- 통상 채점과 메타모픽 검증을 독립적으로 관리 가능
- RunOptions로 메타모픽만 켜고/끄기 쉬움

---

## 4) 구현 방법
`SingleAutoModule`, `BatchAutoModule` 각각을 사용해 테스트하는 방법은 별도의 파일로 설명합니다.


---
## 5) 좋은 메타모픽 property 예시 모음
### 문자열/배열 문제
- 순열 불변: shuffle(x) → 결과 동일
- 중립 원소 추가: x + 0, x + "" → 결과 동일
- 중복 제거/추가: “정렬/중복제거” 류 성질 유지
- 입력 두 번 적용: f(f(x)) 관계 등(문제에 따라)

### 그래프/집합 문제
- 노드 라벨 치환(invariance under renaming)
- 간선 순서 변화에 대한 불변식
- 입력 순서에 무관한 결과
---
## 6) 팁 (실전 운영)
- 메타모픽은 expected가 없어도 되므로 “대량 랜덤”에 강합니다.
- 하지만 메타모픽 모듈은 **정확한 정답 채점**이 아니라 **성질 위반 탐지**에 강합니다.
- 따라서 property가 너무 약하면 버그를 놓칠 수 있습니다.
  - 가능하면 여러 property를 함께 적용하거나
  - seed를 늘리거나
  - 랜덤 변형을 섞는 것을 추천합니다.
- 메타모픽 모듈은 “벤치”보다는 “검증” 목적이 강하므로, 벤치는 excludeTags("metamorphic")로 분리하는 것을 추천합니다.